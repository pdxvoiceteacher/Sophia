<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sophia Run Viewer</title>
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body>
    <header class="app-header">
      <div>
        <h1>Sophia Run Viewer</h1>
        <p class="subtitle">Offline viewer for Sophia telemetry, audit, and plan artifacts.</p>
      </div>
      <div class="header-actions">
        <button id="toggle-plain" class="ghost">Plain Speech</button>
        <button id="toggle-evidence" class="ghost">Evidence Layer</button>
      </div>
    </header>

    <section class="controls">
      <div class="control-group">
        <label class="file-label">
          Load ZIP
          <input id="zip-input" type="file" accept=".zip" />
        </label>
        <label class="file-label">
          Load Folder
          <input id="folder-input" type="file" webkitdirectory />
        </label>
        <div id="drop-zone" class="drop-zone" aria-label="Drop run bundle">Drop ZIP here</div>
      </div>
      <div class="control-group">
        <label for="run-picker">Run folder</label>
        <select id="run-picker"></select>
      </div>
      <div class="control-group">
        <label for="density">Density</label>
        <select id="density">
          <option value="low">Low</option>
          <option value="medium" selected>Medium</option>
          <option value="high">High</option>
        </select>
      </div>
      <div class="control-group">
        <label for="font-size">Font size</label>
        <input id="font-size" type="range" min="14" max="22" value="16" />
      </div>
      <div class="control-group">
        <label for="line-spacing">Line spacing</label>
        <input id="line-spacing" type="range" min="1.2" max="2.0" step="0.1" value="1.5" />
      </div>
      <div class="control-group">
        <label class="checkbox">
          <input id="one-at-a-time" type="checkbox" />
          One thing at a time
        </label>
      </div>
    </section>

    <main class="layout">
      <aside class="sidebar">
        <section class="card">
          <h2>Run Summary</h2>
          <div id="summary"></div>
          <div class="copy-actions">
            <button id="copy-command">Copy next command</button>
            <button id="copy-pr">Copy PR snippet</button>
            <button id="copy-bug">Copy bug report</button>
          </div>
        </section>

        <section class="card">
          <h2>Glossary</h2>
          <ul id="glossary"></ul>
        </section>
      </aside>

      <section class="content">
        <nav class="tabs">
          <button class="tab active" data-view="dashboard">Dashboard</button>
          <button class="tab" data-view="evidence">Evidence</button>
          <button class="tab" data-view="election">Election</button>
          <button class="tab" data-view="warrant">Warrant</button>
          <button class="tab" data-view="execution">Execution</button>
          <button class="tab" data-view="json">JSON Viewer</button>
        </nav>

        <section id="view-dashboard" class="view active">
          <div class="grid">
            <section class="card">
              <h3>Governance Overview</h3>
              <div id="governance-overview"></div>
            </section>
            <section class="card">
              <h3>Top Risks</h3>
              <div id="top-risks"></div>
            </section>
            <section class="card">
              <h3>Recommended Actions</h3>
              <div id="recommended-actions"></div>
            </section>
            <section class="card">
              <h3>Artifacts</h3>
              <div id="artifacts"></div>
            </section>
          </div>
        </section>

        <section id="view-evidence" class="view">
          <div class="grid">
            <section class="card">
              <h3>Claims</h3>
              <div id="claims"></div>
            </section>
            <section class="card">
              <h3>Contradictions</h3>
              <div id="contradictions"></div>
            </section>
            <section class="card">
              <h3>Event Streams</h3>
              <div id="events"></div>
            </section>
          </div>
        </section>

        <section id="view-election" class="view">
          <div class="grid">
            <section class="card">
              <h3>Election Summary</h3>
              <div id="election-summary"></div>
            </section>
            <section class="card">
              <h3>Decision Proof</h3>
              <div id="decision-proof"></div>
            </section>
            <section class="card">
              <h3>Ledger Anchor</h3>
              <div id="ledger-anchor"></div>
            </section>
          </div>
        </section>

        <section id="view-warrant" class="view">
          <div class="grid">
            <section class="card">
              <h3>Authorized Actions</h3>
              <div id="warrant"></div>
            </section>
          </div>
        </section>

        <section id="view-execution" class="view">
          <div class="grid">
            <section class="card">
              <h3>Execution Receipt</h3>
              <div id="execution-receipt"></div>
            </section>
            <section class="card">
              <h3>Execution Diffs</h3>
              <div id="execution-diffs"></div>
            </section>
          </div>
        </section>

        <section id="view-json" class="view">
          <div class="card">
            <h3>JSON Viewer</h3>
            <div class="json-controls">
              <button data-json="telemetry.json">telemetry.json</button>
              <button data-json="sophia_audit.json">sophia_audit.json</button>
              <button data-json="sophia_plan.json">sophia_plan.json</button>
              <button data-json="policy_resolution.json">policy_resolution.json</button>
              <button data-json="election.json">election.json</button>
              <button data-json="tally.json">tally.json</button>
              <button data-json="decision.json">decision.json</button>
              <button data-json="warrant.json">warrant.json</button>
              <button data-json="execution_receipt.json">execution_receipt.json</button>
            </div>
            <pre id="json-viewer"></pre>
          </div>
        </section>
      </section>
    </main>

    <script type="module" src="src/app.js"></script>
  </body>
</html>
